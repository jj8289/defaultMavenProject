<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.jj.match.dao.matchDAO">

<select id="selectMatchListForUser" parameterType="RequireVO">
	SELECT  *
	  FROM  TB_REQUIRE A
	       ,TB_USER B
	       ,TB_REGISTER C
	 WHERE  A.USER_NO = B.USER_NO
	   AND  B.JOB_NO = C.JOB
	   AND  A.SEARCH_TYPE = C.WORK_TYPE
	   AND  A.USER_NO = #{userNo}
</select>

<sql id="userPerFectIf">
	<if test="salary_hour != '' and salary_hour != null">
	   AND  (A.SALARY_HOUR REQ_SAL_HOUR <![CDATA[<=]]> C.SALARY_HOUR REG_SAL_HOUR OR A.SALARY_HOUR REQ_SAL_HOUR<![CDATA[<=]]> C.CAL_SALARY_HOUR CAL_SALLARY_HOUR)
	</if>
	<if test="salary_day != '' and salary_day != null">
	   AND  (A.SALARY_DAY REQ_SAL_DAY <![CDATA[<=]]> C.SALARY_DAY REG_SAL_DAY OR A.SALARY_DAY REQ_SAL_DAY<![CDATA[<=]]> C.CAL_SALARY_DAY CAL_SALLARY_DAY)
	</if>
	<if test="searchType == 'part'">
	   AND  (SEARCH_START <![CDATA[<=]]> STR_TO_DATE(AA.WORK_START , '%Y-%m-%d'))
	</if>
	<if test="searchType == 'one'">
	   AND (SEARCH_DATE = STR_TO_DATE(AA.WORK_DATE , '%Y-%m-%d'))
	</if>	
	<if test="searchType == 'sat'">
	   AND (SEARCH_DATE <![CDATA[<=]]> STR_TO_DATE(AA.WORK_DATE , '%Y-%m-%d'))
	</if>	
	<if test="searchTime != '0'">
	   AND SEARCH_TIME = TIME_FLAG
	</if>
	<if test="location != '0'">
	   AND SEARCH_TIME = TIME_FLAG
	</if>
</sql>
</mapper>